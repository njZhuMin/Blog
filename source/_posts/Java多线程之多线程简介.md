---
title: Java多线程之多线程简介
date: 2016-08-01 09:31:16
tags: [java,multi-thread]
categories:
- Java
- thread
---

> Java多线程系列文章：
> https://zhum.in/blog/categories/Java/thread/

- - -

# 进程和线程
进程是程序在一个数据集合上运行的过程，是系统进行资源分配和调度的一个独立单位。
线程可以理解成是进程中独立运行的子任务。线程的优点是最大限度的利用CPU的空闲时间来处理其他任务，提升系统的运行效率。

# 使用多线程
实现多线程编程的方式主要有两种，一种是继承Thread类，另一种是实现Runnable接口。Thread类实现了Runnable接口。使用继承Thread类的方式，最大的局限就是不支持多继承，所以推荐使用实现Runnable接口方式。使用多线程技术，代码的运行结果与代码的执行顺序或调用顺序是无关的。

多线程并发访问一个类的某个实例的实例变量时会出现线程不安全的问题，而方法级别的变量是线程安全的。synchronized关键字可以在任意的对象及方法上加锁，而加锁的这段代码称为“互斥区”或“临界区”。线程要想执行临界区中的代码，需要拿到对应的锁，在多线程的情况下会有多个线程同时去争一把锁，直到拿到锁为止。

<!-- more -->

# currentThread()方法
currentThread()方法可返回当前代码段正在被哪个线程调用的信息。例如，Thread.currentThread().getName()返回当前线程的线程名称。

# isAlive()方法
isAlive()方法的功能是判断当前线程是否处于活动状态。活动状态是指线程已经启动尚未终止，线程处于正在运行或准备开始运行的状态。

# Thread.sleep()方法
sleep()方法的作用是在指定的毫秒数内让当前正在执行的线程休眠(暂停执行)，需要注意，此时并不会释放所持有的锁。

# getId()方法
getId()方法的作用是取得线程的唯一标识。

# start()方法
start()方法用于真正去启动一个线程，等待调度执行。

# run()方法
run()方法是线程被调度执行时真正执行的方法，直接调用run()方法并不能开启多线程。

# 停止线程
在Java中有以下3种方法可以停止正在运行的线程：

1. 使用退出标志，使线程正常退出，也就是当run方法完成后线程终止。
2. 使用stop方法强行终止，但是不推荐这个方法，因为这个方法可能产生不可预料的结果，而且这个方法已经被官方标记为废弃，不建议使用了。
3. 使用interrupt方法中断线程，需要结合interrupted方法，通过抛异常的方式。

Thread类中提供了以下两个方法用于判断线程的状态是不是停止：
1. interrupted()测试当前线程是否已经中断，即判断当前运行interrupted()方法的线程的中断状态是否为true，interrupted()方法被调度执行后会清除掉中断状态为false。
2. isInterrupted()测试线程是否已经中断，但是不会清除掉中断状态。

# 暂停线程
暂停线程意味着线程还可以恢复。在Java的多线程中，使用suspend()方法暂停线程，使用resume()方法恢复线程的执行。
使用这两个方法时需要注意以下两点：
1. suspend()和resume()使用不当，会造成公共的同步对象的独占，使其它线程无法访问公共同步对象。
2. suspend和resume也会容易出现因为线程暂停而出现的数据不同步的情况。

# yield()方法
yield()方法的作用是放弃当前的CPU资源，将其让给其它任务去占用CPU执行时间，放弃的时间不确定，可能会马上再次获得CPU时间片。

# 线程的优先级
在操作系统中，线程可以划分优先级，优先级较高的线程得到的CPU资源较多，也就是CPU优先执行优先级较高的线程对象中的任务。在Java中，设置了1~10这10个优先级等级，默认MIN_PRIORITY=1，NORM_PRIORITY=5，MAX_PRIORITY=10。线程的优先级具有继承性，比如A线程启动B线程，则B线程的优先级与A线程优先级相同。优先级对于线程的运行是有随机性的。

# 守护线程
在Java中有两种线程，一种是用户线程，一种是守护线程。守护线程是一种特殊的线程，它具有陪伴的特性，当线程中不存在非守护线程了，守护线程也就自动销毁了。
